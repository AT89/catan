<!DOCTYPE html>
<html>
  <head>
    <title>Catan Generator</title>

    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="./assets/favicon/manifest.json">
    <link rel="mask-icon" href="./assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="./assets/favicon/favicon.ico">
    <meta name="msapplication-config" content="./assets/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" href="catan.css">
    <script src="js/helper.js"></script>
    <script src="js/main.js"></script>
    <script>
      window.onload = function() {
        var search = window.location.search;
        if (search.startsWith("?game=")) {
          var index = search.indexOf("&");
          if (index != -1) {
            var game = decode(search.slice(6, index));
          } else {
            var game = decode(search.slice(6));
          }
        } else {
          var game = newGame();
        }
        console.log(encode(game));
        displayGame(game);

        var moveColors = ['red', 'blue', 'yellow', 'white', 'white', 'yellow', 'blue', 'red'];
        var index = 0;

        var spots = document.querySelectorAll('.chunk span');

        for (var i = 0; i < spots.length; i++) {
          spots[i].addEventListener('click', function(event) {
            if (index < moveColors.length) {
              if (this.classList.contains('open')) {
                // Set it to whatever spot it is now
                this.classList.remove('open');
                this.classList.add(moveColors[index]);

                index += 1;
              }

              if (index == moveColors.length) {
                for (var i = 0; i < spots.length; i++) {
                  spots[i].classList.remove('open');
                }
              }
            }
          });
        }
      };
    </script>
  </head>
  <body>
  </body>
</html>